schema:
  schema_id: moran_sentence
  name: é­”ç„¶Â·æ•´å¥
  version: "20240115"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
  description: |
    ç„¡ç°¡å¿«ç¢¼çš„è¼¸å…¥ç´”ç²¹æ•´å¥è¼¸å…¥æ¨¡å¼ã€‚
  dependencies:
    - tiger
    - moran_english
    #- moran_japanese

switches:
  - name: ascii_mode
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: traditionalization
    states: [ æ±‰å­—, æ¼¢å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: extended_charset
    states: [ é€šç”¨, å¢å»£ ]
  - name: emoji
    states: [ ğŸˆš, ğŸˆ¶ ]
  - name: chaifen
    states: [ ä¸æ‹†, æ‰Œæ–¥ ]
  - name: unicode_comment
    states: [ Ué–‹, Ué—œ ]
  - name: dzing
    states: [ é€š, å¯ ]
  - options: [ std_opencc,  std_tw, std_hk, std_dzing ]
    states: [ é€š, è‡º, æ¸¯, å¯ ]

engine:
  processors:
    - key_binder
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator@reverse_universal
    - reverse_lookup_translator@reverse_tiger
    - reverse_lookup_translator@reverse_stroke
    - reverse_lookup_translator@reverse_cangjie5
    - reverse_lookup_translator@reverse_zrlf
    - lua_translator@date_translator        # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
    - lua_translator@lunar                  # å†œå†
    - table_translator@custom_phrase        # è‡ªå®šç¾©çŸ­èª
    - table_translator@cn_en                # ä¸­è‹±æ··åˆè¯æ±‡
    #- table_translator@english              # è‹±èªæ··è¼¸
    - table_translator@melt_eng             # è‹±æ–‡è¾“å…¥
    #- table_translator@japanese            # æ—¥èªæ··è¼¸
    - script_translator
    - lua_translator@unicode                # Unicode
    - lua_translator@number_translator  # æ•°å­—ã€é‡‘é¢å¤§å†™
    - lua_translator@force_gc               # æš´åŠ›GC
  filters:
    #- lua_filter@*moran_aux_hint           # è¼”åŠ©ç¢¼æç¤ºéœ€è¦å»æ‰æœ¬è¡Œé–‹é ­çš„ # ç¬¦è™Ÿ
    - lua_filter@corrector                  # é”™éŸ³é”™å­—æç¤º
    - reverse_lookup_filter@radical_reverse_lookup  # éƒ¨ä»¶æ‹†å­—æ»¤é•œ
    - lua_filter@autocap_filter                     # è‹±æ–‡è‡ªåŠ¨å¤§å†™
    - lua_filter@pin_cand_filter                    # ç½®é¡¶å€™é€‰é¡¹ï¼ˆé¡ºåºè¦æ±‚ï¼šç½®é¡¶å€™é€‰é¡¹ > Emoji > ç®€ç¹åˆ‡æ¢ï¼‰
    - lua_filter@reduce_english_filter              # é™ä½éƒ¨åˆ†è‹±è¯­å•è¯åœ¨å€™é€‰é¡¹çš„ä½ç½®
    - lua_filter@*moran_charset_filter     # å­—é›†éæ¿¾éœ€è¦å»æ‰æœ¬è¡Œé–‹é ­çš„ # ç¬¦è™Ÿ
    - simplifier@chaifen
    - simplifier
    - simplifier@emoji
    - simplifier@std_tw
    - simplifier@std_hk
    - simplifier@std_dzing
    - uniquifier

# Lua é…ç½®: æ—¥æœŸã€æ—¶é—´ã€æ˜ŸæœŸã€ISO 8601ã€æ—¶é—´æˆ³çš„è§¦å‘å…³é”®å­—
date_translator:
  date: date            # æ—¥æœŸï¼š 2022-11-29
  time: time            # æ—¶é—´ï¼š 18:13
  week: week            # æ˜ŸæœŸï¼š æ˜ŸæœŸäºŒ
  datetime: datetime    # ISO 8601ï¼š 2022-11-29T18:13:11+08:00
  timestamp: timestamp  # æ—¶é—´æˆ³ï¼š 1669716794


# Lua é…ç½®ï¼šå†œå†çš„è§¦å‘å…³é”®å­—
lunar: lunar  # å†œå†ï¼š äºŒã€‡äºŒä¸‰å¹´å†¬æœˆäºŒå ç™¸å¯å¹´ï¼ˆå…”ï¼‰å†¬æœˆäºŒå


# Lua é…ç½®ï¼šä¸º corrector æ ¼å¼åŒ– commentï¼Œå ä½ç¬¦ä¸º {comment}
# é»˜è®¤ "{comment}" è¾“å…¥ hun dun æ—¶ä¼šåœ¨ã€Œé¦„é¥¨ã€æ—è¾¹ç”Ÿæˆ hÃºn tun çš„ comment
# ä¾‹å¦‚å·¦å³åŠ ä¸ªæ‹¬å· "({comment})" å°±ä¼šå˜æˆ (hÃºn tun)
corrector: "{comment}"

# Lua é…ç½®: é™ä½éƒ¨åˆ†è‹±è¯­å•è¯åœ¨å€™é€‰é¡¹çš„ä½ç½®ã€‚
# è¯¦ç»†ä»‹ç» https://dvel.me/posts/make-rime-en-better/#çŸ­å•è¯ç½®é¡¶çš„é—®é¢˜
# æ­£å¸¸æƒ…å†µï¼š è¾“å…¥ rug å¾—åˆ° ã€Œ1.rug 2.å¦‚æœ â€¦â€¦ ã€
# é™ä½ä¹‹åï¼š è¾“å…¥ rug å¾—åˆ° ã€Œ1.å¦‚æœ 2.rug â€¦â€¦ ã€
# å‡ ç§æ¨¡å¼ï¼š
# all     é™ä½è„šæœ¬å†…ç½®çš„å•è¯ï¼ˆæ‰€æœ‰ 3~4 ä½é•¿åº¦ã€å‰ 2~3 ä½æ˜¯å®Œæ•´æ‹¼éŸ³ã€æœ€åä¸€ä½æ˜¯å£°æ¯ï¼‰ï¼Œwords ä½œä¸ºè‡ªå®šä¹‰çš„é¢å¤–è¡¥å……
# custom  å®Œå…¨è‡ªå®šä¹‰ï¼Œåªé™ä½ words é‡Œçš„
# none    ä¸é™ä½ä»»ä½•å•è¯ï¼Œç›¸å½“äºæ²¡æœ‰å¯ç”¨è¿™ä¸ª Lua
# ï¼ˆåŒ¹é…çš„æ˜¯ç¼–ç ï¼Œä¸æ˜¯å•è¯ï¼‰
reduce_english_filter:
  mode: custom  # all | custom | none
  idx: 2        # é™ä½åˆ°ç¬¬ idx ä¸ªä½ç½®
  # è‡ªå®šä¹‰çš„å•è¯åˆ—è¡¨ï¼Œç¤ºä¾‹åˆ—è¡¨æ²¡æœ‰é™ä½éƒ¨åˆ†å¸¸ç”¨å•è¯ï¼Œå¦‚ and cat mail Mac but bad shit â€¦â€¦
  words: [
    aid, ann,
    bail, bait, bam, band, bans, bat, bay, bend, bent, benz, bib, bid, bien, biz, boc, bop, bos, bud, buf, bach, bench, bush,
    cab, cad, cain, cam, cans, cap, cas, cef, chad, chan, chap, chef, cher, chew, chic, chin, chip, chit, coup, cum, cunt, cur, couch,
    dab, dag, dal, dam, dent, dew, dial, diet, dim, din, dip, dis, dit, doug, dub, dug, dunn,
    fab, fax, fob, fog, foul, fur,
    gag, gail, gain, gal, gam, gaol, ged, gel, ger, guam, gus, gut,
    hail, ham, hank, hans, hat, hay, heil, heir, hem, hep, hud, hum, hung, hunk, hut, hush,
    jim, jug,
    kat,
    lab, lad, lag, laid, lam, laos, lap, lat, lax, lay, led, leg, lex, liam, lib, lid, lied, lien, lies, linn, lip, lit, liz, lob, lug, lund, lung, lux, lash, loch, lush,
    mag, maid, mann, mar, mat, med, mel, mend, mens, ment, mil, mins, mint, mob, moc, mop, mos, mot, mud, mug, mum, mesh,
    nap, nat, nay, neil, nib, nip, noun, nous, nun, nut, nail, nash,
    pac, paid, pail, pain, pair, pak, pal, pam, pans, pant, pap, par, pat, paw, pax, pens, pic, pier, pies, pins, pint, pit, pix, pod, pop, pos, pot, pour, pow, pub, pinch, pouch,
    rand, rant, rent, rep, res, ret, rex, rib, rid, rig, rim, rub, rug, rum, runc, runs, ranch,
    sac, sail, sal, sam, sans, sap, saw, sax, sew, sham, shaw, shin, sig, sin, sip, sis, suit, sung, suns, sup, sur, sus,
    tad, tail, taj, tar, tax, tec, ted, tel, ter, tex, tic, tied, tier, ties, tim, tin, tit, tour, tout, tum,
    wag, wand, womens, wap, wax, weir, won,
    yan, yen,
    zach
  ]


# Lua é…ç½®: ç½®é¡¶å€™é€‰é¡¹
# æ³¨é‡Šå¤ªé•¿äº†ï¼Œè¯·å‚è€ƒ pin_cand_filter.lua å¼€å¤´çš„è¯´æ˜ä¹¦ã€‚
pin_cand_filter:
  # æ ¼å¼ï¼šç¼–ç <Tab>å­—è¯1<Space>å­—è¯2â€¦â€¦
  - d	çš„

# æ‹¼å†™è®¾å®š
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`
  # initials å®šä¹‰ä»…ä½œä¸ºå§‹ç çš„æŒ‰é”®ï¼Œæ’é™¤ ` è®©å•ä¸ªçš„ ` å¯ä»¥ç›´æ¥ä¸Šå±
  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  delimiter: " '"
  algebra:
    __patch:
      - moran:/algebra/user_force_top?
      - moran:/algebra/user_sentence_top?
      - moran:/algebra/generate_code
      - moran:/algebra/user_sentence_bottom?
      - moran:/algebra/user_force_bottom?

translator:
  dictionary: moran.extended
  prism: moran_sentence
  spelling_hints: 8             # corrector.lua ï¼šä¸ºäº†è®©é”™éŸ³é”™å­—æç¤ºçš„ Lua åŒæ—¶é€‚é…å…¨æ‹¼åŒæ‹¼ï¼Œå°†æ‹¼éŸ³æ˜¾ç¤ºåœ¨ comment ä¸­
  always_show_comments: true    # corrector.lua ï¼šRime é»˜è®¤åœ¨ preedit ç­‰äº comment æ—¶å–æ¶ˆæ˜¾ç¤º commentï¼Œè¿™é‡Œå¼ºåˆ¶ä¸€ç›´æ˜¾ç¤ºï¼Œä¾› corrector.lua åšåˆ¤æ–­ç”¨ã€‚
  initial_quality: 5
  comment_format:               # æ ‡è®°æ‹¼éŸ³æ³¨é‡Šï¼Œä¾› corrector.lua åšåˆ¤æ–­ç”¨
    - xform/^/ï¼»/
    - xform/$/ï¼½/
  preedit_format:
    - xform/([a-z][a-z][a-z][a-z])o/$1Â°/
    - xform/([bpmnljqxy])n/$1in/
    - xform/(\w)g/$1eng/
    - xform/(\w)q/$1iu/
    - xform/([gkhvuirzcs])w/$1ua/
    - xform/(\w)w/$1ia/
    - xform/([dtnlgkhjqxyvuirzcs])r/$1uan/
    - xform/(\w)t/$1ve/
    - xform/([gkhvuirzcs])y/$1uai/
    - xform/(\w)y/$1ing/
    - xform/([dtnlgkhvuirzcs])o/$1uo/
    - xform/(\w)p/$1un/
    - xform/([jqx])s/$1iong/
    - xform/(\w)s/$1ong/
    - xform/([jqxnl])d/$1iang/
    - xform/(\w)d/$1uang/
    - xform/(\w)f/$1en/
    - xform/(\w)h/$1ang/
    - xform/(\w)j/$1an/
    - xform/(\w)k/$1ao/
    - xform/(\w)l/$1ai/
    - xform/(\w)z/$1ei/
    - xform/(\w)x/$1ie/
    - xform/(\w)c/$1iao/
    - xform/([dtgkhvuirzcs])v/$1ui/
    - xform/(\w)b/$1ou/
    - xform/(\w)m/$1ian/
    - xform/([aoe])\1(\w)/$1$2/
    - "xform/(^|[ '])v/$1zh/"
    - "xform/(^|[ '])i/$1ch/"
    - "xform/(^|[ '])u/$1sh/"
    - xform/([jqxy])v/$1u/
    - xform/([nl])v/$1Ã¼/
    - xform/Ã¼/v/  # Ã¼ æ˜¾ç¤ºä¸º v


custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: moran_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 10

# æ¬¡ç¿»è¯‘å™¨ï¼Œè‹±æ–‡
melt_eng:
  dictionary: melt_eng     # æŒ‚è½½è¯åº“ melt_eng.dict.yaml
  enable_sentence: false   # ç¦æ­¢é€ å¥
  enable_user_dict: false  # ç¦ç”¨ç”¨æˆ·è¯å…¸
  initial_quality: 1.1     # åˆå§‹æƒé‡
  comment_format:          # è‡ªå®šä¹‰æç¤ºç 
    - xform/.*//           # æ¸…ç©ºæç¤ºç 

# ä¸­è‹±æ··åˆè¯æ±‡
cn_en:
  dictionary: ""
  user_dict: en_dicts/cn_en_double_pinyin
  db_class: stabledb
  enable_completion: true
  enable_sentence: false
  initial_quality: 0.5
  comment_format:
    - xform/^.+$//


english:
  dictionary: moran_english
  enable_completion: true
  enable_sentence: false
  enable_user_dict: true
  initial_quality: 1
  enable_encoder: false
  encode_commit_history: false
  comment_format:
    - xform/.*//

japanese:
  dictionary: moran_japanese
  enable_completion: false
  enable_sentence: true
  enable_user_dict: true
  initial_quality: 0
  enable_encoder: false
  encode_commit_history: false
  comment_format:
    - xform/.*//

simplifier:
  option_name: traditionalization
  opencc_config: s2t.json

chaifen:
  option_name: chaifen
  opencc_config: moran_chaifen.json
  tips: char
  show_in_comment: true
  comment_form:
    - "xform/-/ /"

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: all

std_hk:
  opencc_config: t2hk.json
  option_name: std_hk

std_tw:
  opencc_config: t2tw.json
  option_name: std_tw

std_dzing:
  opencc_config: moran_dzing.json
  option_name: std_dzing
  tips: all

reverse_format:
  comment_format:
    - xform/(\w\w);(\w\w)/$1[$2]/
  preedit_format:
    - xform/^o(lf|bh|cj)//

reverse_tiger:
  tag: reverse_tiger
  dictionary: tiger
  enable_completion: true
  prefix: "`"
  tips: ã€”è™ç¢¼ã€•
  __include: reverse_format

reverse_universal:
  tag: reverse_universal
  dictionary: moran.chars
  tips: ã€”é€šé…ã€•
  __include: reverse_format

reverse_stroke:
  tag: reverse_stroke
  dictionary: stroke
  prefix: "obh"
  enable_completion: true
  tips: ã€”æ©«hè±sæ’‡pæºnæŠ˜zã€•
  __include: reverse_format

reverse_cangjie5:
  tag: reverse_cangjie5
  dictionary: cangjie5
  prefix: "ocj"
  enable_completion: true
  tips: ã€”å€‰é ¡äº”ä»£ã€•
  __include: reverse_format

reverse_zrlf:
  tag: reverse_zrlf
  dictionary: zrlf
  prefix: "olf"
  enable_completion: true
  tips: ã€”å…©åˆ†ã€•
  __include: reverse_format

reverse_lookup:
  extra_tags:
    - reverse_tiger
    - reverse_universal
    - reverse_stroke
    - reverse_cangjie5
    - reverse_zrlf

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    __patch:
      - moran:/key_bindings/moran_capital_for_last_syllable
      - moran:/key_bindings/moran_tab
      - moran:/key_bindings/moran_semicolon_for_2
      - moran:/key_bindings/moran_switches

recognizer:
  import_preset: default
  patterns:
    reverse_universal: "(^(`[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    reverse_tiger: "(^`$)|(^`[a-zA-Z]+$)"
    reverse_stroke: "^obh[A-Za-z]*$"
    reverse_cangjie5: "^ocj[A-Za-z]*$"
    reverse_zrlf: "^olf[A-Za-z]*$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'     # å“åº” symbols_caps_v.yaml çš„ symbols
    unicode: "^U[a-f0-9]+"              # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ U ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@unicodeï¼Œè¾“å‡º Unicode å­—ç¬¦
    number: "^R[0-9]+[.]?[0-9]*"        # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ R ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@number_translatorï¼Œæ•°å­—é‡‘é¢å¤§å†™
    gregorian_to_lunar: "^N[0-9]{1,8}"  # è„šæœ¬å°†è‡ªåŠ¨è·å–ç¬¬ 2 ä¸ªå­—ç¬¦ N ä½œä¸ºè§¦å‘å‰ç¼€ï¼Œå“åº” lua_translator@lunarï¼Œå…¬å†è½¬å†œå†ï¼Œè¾“å…¥ N20240115 å¾—åˆ°ã€ŒäºŒã€‡äºŒä¸‰å¹´è…Šæœˆåˆäº”ã€


# é»˜èªå•“ç”¨èªè¨€æ¨¡å‹
__include: moran:/octagram/enable_for_sentence
